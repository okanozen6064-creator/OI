
# Supabase Kurulum ve Mail Entegrasyonu

Web sitenizdeki form verilerini kaydetmek ve size mail gelmesini sağlamak için aşağıdaki adımları izleyin.

## 1. Veritabanı Tablosunu Oluşturun

Supabase paneline gidin (SQL Editör kısmına) ve aşağıdaki kodu çalıştırarak `leads` tablosunu oluşturun. Bu tablo formdan gelen verileri tutacaktır.

```sql
-- Leads tablosunu oluştur
create table leads (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  full_name text,
  email text,
  phone text,
  service_needed text,
  status text default 'new'
);

-- RLS (Row Level Security) açalım (Güvenlik için)
alter table leads enable row level security;

-- Herkesin bu tabloya veri eklemesine izin ver (Public form olduğu için)
create policy "Enable insert for all users" on leads
  for insert with check (true);

-- Sadece yetkili kişilerin verileri görmesine izin ver (Anonim kullanıcılar kendi eklediklerini bile göremez)
create policy "Enable read for service role only" on leads
  for select using (false);
```

## 2. Form Gönderildiğinde Mail Alma (Nasıl Yapılır?)

Supabase sadece bir veritabanıdır, doğrudan mail göndermez. Mail bildirimi almak için en kolay ve profesyonel yöntem **Supabase -> Webhook -> Mail Servisi** bağlantısı kurmaktır.

### Yöntem A: En Kolay Yöntem (Make.com veya Zapier) - ÖNERİLEN

Kod yazmadan bu işi çözmek için:

1.  **Make.com** hesabı açın (Ücretsiz).
2.  Yeni bir senaryo oluşturun.
3.  Tetikleyici (Trigger) olarak **"Supabase - Watch Rows"** seçin.
    -   `leads` tablosunu dinlemesini söyleyin.
4.  Aksiyon olarak **"Gmail - Send an Email"** (veya kullandığınız mail servisini) seçin.
    -   Alıcı kısmına kendi mail adresinizi yazın.
    -   Konu: "Yeni Web Sitesi Teklifi Var!"
    -   İçerik: Supabase'den gelen İsim, Telefon ve Mesaj verilerini buraya sürükleyip bırakın.
5.  Senaryoyu aktif edin.

Artık web sitenizden form doldurulduğunda, veriler Supabase'e kaydedilecek ve Make.com bunu algılayıp anında size mail atacak.

### Yöntem B: Edge Functions (Yazılımcı Yöntemi)

Eğer harici servis kullanmak istemezseniz, Supabase Edge Functions kullanarak bir `send-email` fonksiyonu yazıp, veritabanına her kayıt eklendiğinde bu fonksiyonu tetikleyebilirsiniz (Database Webhooks). Bu yöntem biraz daha teknik kurulum gerektirir (Resend veya SendGrid API anahtarı gerekir).
